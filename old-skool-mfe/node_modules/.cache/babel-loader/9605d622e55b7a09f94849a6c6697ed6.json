{"ast":null,"code":"var _jsxFileName = \"/Users/valenlongfeather/Documents/OldSkoolMFE/old-skool-mfe/src/MicroFrontend.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction MicroFrontend(_ref) {\n  _s();\n\n  let {\n    name,\n    host,\n    history\n  } = _ref;\n  useEffect(() => {\n    const scriptId = `micro-frontend-script-${name}`;\n\n    const renderMicroFrontend = () => {\n      window[`render${name}`](`${name}`, history);\n    };\n\n    if (document.getElementById(scriptId)) {\n      renderMicroFrontend();\n      return;\n    }\n\n    fetch(`${host}/asset-manifest.json`).then(res => res.json()).then(manifest => {\n      const script = document.createElement(\"script\");\n      script.id = scriptId;\n      script.crossOrigin = \"\";\n      script.src = `${host}${manifest.files[\"main.js\"]}`;\n\n      script.onload = () => {\n        renderMicroFrontend();\n      };\n\n      document.head.appendChild(script);\n    });\n    return () => {\n      window[`unmount${name}`] && window[`unmount${name}`](`${name}-container`);\n    };\n  });\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    id: `${name}-container`\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 10\n  }, this);\n}\n\n_s(MicroFrontend, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c = MicroFrontend;\nMicroFrontend.defaultProps = {\n  document,\n  window\n};\nexport default MicroFrontend;\n\nvar _c;\n\n$RefreshReg$(_c, \"MicroFrontend\");","map":{"version":3,"sources":["/Users/valenlongfeather/Documents/OldSkoolMFE/old-skool-mfe/src/MicroFrontend.js"],"names":["React","useEffect","MicroFrontend","name","host","history","scriptId","renderMicroFrontend","window","document","getElementById","fetch","then","res","json","manifest","script","createElement","id","crossOrigin","src","files","onload","head","appendChild","defaultProps"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;;AAEA,SAASC,aAAT,OAAgD;AAAA;;AAAA,MAAzB;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,IAAR;AAAcC,IAAAA;AAAd,GAAyB;AAC9CJ,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMK,QAAQ,GAAI,yBAAwBH,IAAK,EAA/C;;AAEA,UAAMI,mBAAmB,GAAG,MAAM;AAChCC,MAAAA,MAAM,CAAE,SAAQL,IAAK,EAAf,CAAN,CAAyB,GAAEA,IAAK,EAAhC,EAAmCE,OAAnC;AACD,KAFD;;AAIA,QAAII,QAAQ,CAACC,cAAT,CAAwBJ,QAAxB,CAAJ,EAAuC;AACrCC,MAAAA,mBAAmB;AACnB;AACD;;AAEDI,IAAAA,KAAK,CAAE,GAAEP,IAAK,sBAAT,CAAL,CACGQ,IADH,CACSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EADjB,EAEGF,IAFH,CAESG,QAAD,IAAc;AAClB,YAAMC,MAAM,GAAGP,QAAQ,CAACQ,aAAT,CAAuB,QAAvB,CAAf;AACAD,MAAAA,MAAM,CAACE,EAAP,GAAYZ,QAAZ;AACAU,MAAAA,MAAM,CAACG,WAAP,GAAqB,EAArB;AACAH,MAAAA,MAAM,CAACI,GAAP,GAAc,GAAEhB,IAAK,GAAEW,QAAQ,CAACM,KAAT,CAAe,SAAf,CAA0B,EAAjD;;AACAL,MAAAA,MAAM,CAACM,MAAP,GAAgB,MAAM;AACpBf,QAAAA,mBAAmB;AACpB,OAFD;;AAGAE,MAAAA,QAAQ,CAACc,IAAT,CAAcC,WAAd,CAA0BR,MAA1B;AACD,KAXH;AAaA,WAAO,MAAM;AACXR,MAAAA,MAAM,CAAE,UAASL,IAAK,EAAhB,CAAN,IAA4BK,MAAM,CAAE,UAASL,IAAK,EAAhB,CAAN,CAA0B,GAAEA,IAAK,YAAjC,CAA5B;AACD,KAFD;AAGD,GA5BQ,CAAT;AA8BA,sBAAO;AAAM,IAAA,EAAE,EAAG,GAAEA,IAAK;AAAlB;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;;GAhCQD,a;;KAAAA,a;AAkCTA,aAAa,CAACuB,YAAd,GAA6B;AAC3BhB,EAAAA,QAD2B;AAE3BD,EAAAA;AAF2B,CAA7B;AAKA,eAAeN,aAAf","sourcesContent":["import React, { useEffect } from \"react\";\n\nfunction MicroFrontend({ name, host, history }) {\n  useEffect(() => {\n    const scriptId = `micro-frontend-script-${name}`;\n\n    const renderMicroFrontend = () => {\n      window[`render${name}`](`${name}`, history);\n    };\n\n    if (document.getElementById(scriptId)) {\n      renderMicroFrontend();\n      return;\n    }\n\n    fetch(`${host}/asset-manifest.json`)\n      .then((res) => res.json())\n      .then((manifest) => {\n        const script = document.createElement(\"script\");\n        script.id = scriptId;\n        script.crossOrigin = \"\";\n        script.src = `${host}${manifest.files[\"main.js\"]}`;\n        script.onload = () => {\n          renderMicroFrontend();\n        };\n        document.head.appendChild(script);\n      });\n\n    return () => {\n      window[`unmount${name}`] && window[`unmount${name}`](`${name}-container`);\n    };\n  });\n\n  return <main id={`${name}-container`} />;\n}\n\nMicroFrontend.defaultProps = {\n  document,\n  window,\n};\n\nexport default MicroFrontend;\n"]},"metadata":{},"sourceType":"module"}